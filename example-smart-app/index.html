<!DOCTYPE html>
<html lang="en">

<head>
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>Maggie-SMART-App-2023</title>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/css/bootstrap.min.css" integrity="sha384-xOolHFLEh07PJGoPkLv1IbcEPTNtaed2xpHsD9ESMhqIYd0nLMwNLD69Npy4HI+N" crossorigin="anonymous" />
  <link rel="stylesheet" type="text/css" href="./src/css/example-smart-app.css" />
</head>

<body class="p-2">
  <div id="errors"></div>
  <div id="loading" class="spinner">
    <div class="bounce1"></div>
    <div class="bounce2"></div>
    <div class="bounce3"></div>
  </div>
  <div id="holder">
    <div id="patientsDetails">
      <!-- Card Show Here -->
    </div>
    <table class="table table-bordered mt-2">
      <thead>
        <tr>
          <th scope="col">id</th>
          <th scope="col">resourceType</th>
          <th scope="col">Type</th>
          <th scope="col">Value/Quantity</th>
          <th scope="col">Last Update</th>
        </tr>
      </thead>
      <tbody id="Observation">
        <!-- Table Data Show Here -->
      </tbody>
    </table>
  </div>

  <!-- Application-level javascript-->
  <script src="./src/js/helpers.js"></script>
  <script src="./src/js/smart-app.js?v=0.9"></script>
  <!-- <script src="./src/js/example-smart-app.js?v=0.9"></script> -->

  <!-- FHIR Client JS Library -->
  <script src="./lib/js/fhir-client-v0.1.12.js"></script>

  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
  <script>
    // extractData().then(
    //   //Display Patient Demographics and Observations if extractData was success
    //   function(p) {
    //     console.log("call p")
    //     drawVisualization(p);
    //   },

    //   //Display 'Failed to call FHIR Service' if extractData failed
    //   function() {
    //     $("#loading").hide();
    //     $("#errors").html("<p> Failed to call FHIR Service </p>");
    //   }
    // );


    window.getData().then(
      //Display Patient Demographics and Observations if extractData was success
      function(p) {
        console.log("call p")
        drawVisualization(p);
      },

      //Display 'Failed to call FHIR Service' if extractData failed
      function() {
        $("#loading").hide();
        $("#errors").html("<p> Failed to call FHIR Service </p>");
      }
    );
  </script>
</body>

</html>